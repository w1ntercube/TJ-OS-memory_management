(function(){"use strict";var t={578:function(t,e,n){var i=n(3751),s=n(641);const u={id:"app"};function o(t,e,n,i,o,r){const l=(0,s.g2)("MemoryManagement");return(0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(l)])}var r=n(33);const l=t=>((0,s.Qi)("data-v-aeb05f40"),t=t(),(0,s.jt)(),t),c={class:"memory-management"},a={class:"controls"},h={class:"instruction-count-container"},d=l((()=>(0,s.Lk)("label",{for:"instructionCount"},"指令数:",-1))),m=["disabled"],I={key:0,class:"error-message"},p=l((()=>(0,s.Lk)("p",{style:{color:"red"}},"指令数必须为正整数。",-1))),b=[p],g={class:"algorithm-buttons"},x=["disabled"],f=["disabled"],k={class:"execution-buttons"},v=["disabled"],y=["disabled"],C=["disabled"],E=["disabled"],L={class:"execution-speed-container"},S=l((()=>(0,s.Lk)("label",{for:"executionSpeed"},"执行速度（每秒）:",-1))),F={key:0,class:"error-message"},A=l((()=>(0,s.Lk)("p",{style:{color:"red"}},"执行速度必须为正数且大于等于 0.1。",-1))),P=[A],Q={class:"memory-table"},O=l((()=>(0,s.Lk)("th",null,"内存块编号",-1))),M=l((()=>(0,s.Lk)("td",null,"存储的指令页号",-1))),R={class:"instruction-table"},w=l((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"指令编号"),(0,s.Lk)("th",null,"当前要执行的指令"),(0,s.Lk)("th",null,"指令页号"),(0,s.Lk)("th",null,"是否缺页"),(0,s.Lk)("th",null,"当前缺页率")])],-1))),X={key:0,class:"completion-message"},q={class:"page-turner"},_=["disabled"],T=["disabled"],N={key:1,class:"modal"},U={class:"modal-content"},z=l((()=>(0,s.Lk)("h2",null,"输入自定义指令",-1))),j={key:0,class:"error-message"},B=l((()=>(0,s.Lk)("p",{style:{color:"red"}},"非法输入，请用空格分隔指令。",-1))),H=[B];function K(t,e,n,u,o,l){return(0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",a,[(0,s.Lk)("div",h,[d,(0,s.bo)((0,s.Lk)("input",{type:"number",id:"instructionCount","onUpdate:modelValue":e[0]||(e[0]=t=>o.totalInstructions=t),onInput:e[1]||(e[1]=(...t)=>l.validateInstructionCount&&l.validateInstructionCount(...t)),min:"1"},null,544),[[i.Jo,o.totalInstructions,void 0,{number:!0}]]),(0,s.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>l.openCustomInstructionInput&&l.openCustomInstructionInput(...t)),disabled:o.instructionsComplete,class:"buttons"}," 自定义指令 ",8,m)]),o.instructionCountError?((0,s.uX)(),(0,s.CE)("div",I,b)):(0,s.Q3)("",!0),(0,s.Lk)("div",g,[(0,s.Lk)("button",{onClick:e[3]||(e[3]=t=>l.selectAlgorithm("FIFO")),disabled:o.selectedAlgorithm||o.instructionsComplete||o.instructionCountError,class:"buttons"}," FIFO 算法 ",8,x),(0,s.Lk)("button",{onClick:e[4]||(e[4]=t=>l.selectAlgorithm("LRU")),disabled:o.selectedAlgorithm||o.instructionsComplete||o.instructionCountError,class:"buttons"}," LRU 算法 ",8,f)]),(0,s.Lk)("div",k,[(0,s.Lk)("button",{onClick:e[5]||(e[5]=(...t)=>l.executePrevInstruction&&l.executePrevInstruction(...t)),disabled:!o.selectedAlgorithm||o.instructionsComplete||0===o.currentInstructionIndex,class:"buttons"}," 单步回退 ",8,v),(0,s.Lk)("button",{onClick:e[6]||(e[6]=(...t)=>l.executeNextInstruction&&l.executeNextInstruction(...t)),disabled:!o.selectedAlgorithm||o.instructionsComplete||o.instructionCountError||o.executionSpeedError,class:"buttons"}," 单步执行 ",8,y),(0,s.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>l.startAutoExecution&&l.startAutoExecution(...t)),disabled:!o.selectedAlgorithm||o.instructionsComplete||o.autoExecutionInterval||o.instructionCountError||o.executionSpeedError,class:"buttons"}," 自动执行 ",8,C),(0,s.Lk)("button",{onClick:e[8]||(e[8]=(...t)=>l.pauseAutoExecution&&l.pauseAutoExecution(...t)),disabled:o.instructionsComplete||!o.autoExecutionInterval,class:"buttons"}," 暂停 ",8,E),(0,s.Lk)("div",L,[S,(0,s.bo)((0,s.Lk)("input",{type:"number",id:"executionSpeed","onUpdate:modelValue":e[9]||(e[9]=t=>o.executionSpeed=t),onInput:e[10]||(e[10]=(...t)=>l.validateExecutionSpeed&&l.validateExecutionSpeed(...t)),min:"0.1"},null,544),[[i.Jo,o.executionSpeed,void 0,{number:!0}]])]),o.executionSpeedError?((0,s.uX)(),(0,s.CE)("div",F,P)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{onClick:e[11]||(e[11]=(...t)=>l.resetSimulation&&l.resetSimulation(...t)),class:"buttons reset-button"}," 重置 ")]),(0,s.Lk)("table",Q,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[O,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.memoryBlocks,((t,e)=>((0,s.uX)(),(0,s.CE)("th",{key:"header"+e},(0,r.v_)(e),1)))),128))])]),(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[M,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.memory,((t,e)=>((0,s.uX)(),(0,s.CE)("td",{key:"block"+e},(0,r.v_)(null!==t?t:"空"),1)))),128)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.memoryBlocks.length,(t=>((0,s.uX)(),(0,s.CE)("td",{key:"空"+t},"空")))),128))])])]),(0,s.Lk)("table",R,[w,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.visibleInstructions,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.index},[(0,s.Lk)("td",null,(0,r.v_)(t.index),1),(0,s.Lk)("td",null,(0,r.v_)(t.instruction),1),(0,s.Lk)("td",null,(0,r.v_)(t.pageNumber),1),(0,s.Lk)("td",null,(0,r.v_)(t.pageFault),1),(0,s.Lk)("td",null,(0,r.v_)(t.pageFaultRate)+"%",1)])))),128))])]),o.instructionsComplete?((0,s.uX)(),(0,s.CE)("div",X,[(0,s.Lk)("p",null,"执行完最后一条指令后，缺页率为："+(0,r.v_)(o.pageFaultRate.toFixed(3))+"%。",1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",q,[(0,s.Lk)("button",{onClick:e[12]||(e[12]=(...t)=>l.prevPage&&l.prevPage(...t)),disabled:1===o.currentPage,class:"buttons"}," 上一页 ",8,_),(0,s.Lk)("span",null,"第"+(0,r.v_)(o.currentPage)+" / "+(0,r.v_)(l.totalPages)+"页",1),(0,s.Lk)("button",{onClick:e[13]||(e[13]=(...t)=>l.nextPage&&l.nextPage(...t)),disabled:o.currentPage===l.totalPages,class:"buttons"}," 下一页 ",8,T)]),o.showCustomInstructionInput?((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("div",U,[(0,s.Lk)("span",{class:"close",onClick:e[14]||(e[14]=(...t)=>l.closeCustomInstructionInput&&l.closeCustomInstructionInput(...t))},"×"),z,(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":e[15]||(e[15]=t=>o.customInstructions=t),placeholder:"指令用空格分隔。"},null,512),[[i.Jo,o.customInstructions]]),o.inputError?((0,s.uX)(),(0,s.CE)("div",j,H)):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:e[16]||(e[16]=(...t)=>l.applyCustomInstructions&&l.applyCustomInstructions(...t)),class:"buttons"},"使用")])])])):(0,s.Q3)("",!0)])}n(4114);var J={data(){return{totalInstructions:320,pageSize:10,memoryBlocks:4,instructionCountError:!1,executionSpeedError:!1,memory:[null,null,null,null],memoryHistory:[],pageFaults:0,pageFaultRate:0,instructionSequence:[],fifoQueue:[],lruQueue:[],currentInstruction:null,currentInstructionIndex:0,selectedAlgorithm:null,autoExecutionInterval:null,executionSpeed:20,instructionsComplete:!1,showCustomInstructionInput:!1,customInstructions:"",inputError:!1,instructionTable:[],currentPage:1}},computed:{totalPages(){return Math.ceil(this.instructionTable.length/this.pageSize)},visibleInstructions(){const t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.instructionTable.slice(t,e)}},methods:{validateInstructionCount(){this.totalInstructions<1||!Number.isInteger(this.totalInstructions)?this.instructionCountError=!0:this.instructionCountError=!1},validateExecutionSpeed(){this.executionSpeed<.1||!Number.isFinite(this.executionSpeed)?this.executionSpeedError=!0:this.executionSpeedError=!1},openCustomInstructionInput(){this.showCustomInstructionInput=!0},closeCustomInstructionInput(){this.showCustomInstructionInput=!1,this.inputError=!1,this.customInstructions=""},applyCustomInstructions(){const t=this.customInstructions.trim();if(""===t)return void(this.inputError=!0);const e=this.customInstructions.trim().split(/\s+/).map(Number),n=e.every(Number.isInteger);n&&e.length>0?(this.instructionSequence=e,this.totalInstructions=e.length,this.currentInstructionIndex=0,this.currentInstruction=this.instructionSequence[this.currentInstructionIndex],this.showCustomInstructionInput=!1,this.inputError=!1,this.initializeSimulation()):this.inputError=!0},selectAlgorithm(t){this.selectedAlgorithm=t,this.customInstructions||(this.instructionSequence=this.generateRandomInstructionSequence(),this.totalInstructions=this.instructionSequence.length),this.initializeSimulation()},initializeSimulation(){this.memory=new Array(this.memoryBlocks).fill(null),this.memoryHistory=[],this.pageFaults=0,this.fifoQueue=new Array(this.memoryBlocks).fill(0),this.lruQueue=new Array(this.memoryBlocks).fill(0),this.currentInstructionIndex=0,this.currentInstruction=this.instructionSequence[this.currentInstructionIndex],this.instructionsComplete=!1,this.instructionTable=[],this.autoExecutionInterval&&(clearInterval(this.autoExecutionInterval),this.autoExecutionInterval=null)},generateRandomInstructionSequence(){let t=[],e=Math.floor(Math.random()*this.totalInstructions),n=0;while(n<this.totalInstructions){if(t.push(e),n++,n>=this.totalInstructions)break;if(e=(e+1)%this.totalInstructions,t.push(e),n++,n>=this.totalInstructions)break;if(e>0){if(e=Math.floor(Math.random()*e),t.push(e),n++,n>=this.totalInstructions)break;if(e=(e+1)%this.totalInstructions,t.push(e),n++,n>=this.totalInstructions)break}if(e<this.totalInstructions-2){if(e=Math.floor(Math.random()*(this.totalInstructions-1-e))+e+2,t.push(e),n++,n>=this.totalInstructions)break;e=(e+1)%this.totalInstructions,t.push(e),n++}}return t},executePrevInstruction(){if(this.currentInstructionIndex>0){this.currentInstructionIndex--,this.currentInstruction=this.instructionSequence[this.currentInstructionIndex],this.instructionTable.pop(),this.memoryHistory.length>0&&(this.memory=this.memoryHistory.pop());let t=Math.floor(this.currentInstruction/this.pageSize),e=this.memory.indexOf(t);-1!==e?"FIFO"===this.selectedAlgorithm?this.fifoQueue[e]++:"LRU"===this.selectedAlgorithm&&this.lruQueue[e]++:(this.pageFaults--,"FIFO"===this.selectedAlgorithm?this.fifoQueue=this.fifoQueue.slice(0,-1):"LRU"===this.selectedAlgorithm&&(this.lruQueue=this.lruQueue.slice(0,-1))),this.updatePageFaultRate()}},executeNextInstruction(){this.currentInstructionIndex<this.instructionSequence.length&&(this.memoryHistory.push([...this.memory]),this.accessMemory(this.currentInstruction,this.selectedAlgorithm),this.currentInstructionIndex++,this.currentInstruction=this.instructionSequence[this.currentInstructionIndex],this.updatePageFaultRate()),this.currentInstructionIndex>=this.instructionSequence.length&&(this.instructionsComplete=!0)},startAutoExecution(){if(this.autoExecutionInterval)return;const t=Math.floor(1e3/this.executionSpeed);this.autoExecutionInterval=setInterval((()=>{this.currentInstructionIndex>=this.instructionSequence.length?(clearInterval(this.autoExecutionInterval),this.autoExecutionInterval=null,this.instructionsComplete=!0):this.executeNextInstruction()}),t)},pauseAutoExecution(){this.autoExecutionInterval&&(clearInterval(this.autoExecutionInterval),this.autoExecutionInterval=null)},accessMemory(t,e){let n=Math.floor(t/this.pageSize),i=this.memory.indexOf(n);"FIFO"===e?this.accessMemoryFIFO(n,i):"LRU"===e&&this.accessMemoryLRU(n,i)},accessMemoryFIFO(t,e){let n=!1;if(-1===e){n=!0,this.pageFaults++;const e=this.memory.indexOf(null);if(-1!==e)this.memory[e]=t,this.fifoQueue[e]=this.currentInstructionIndex;else{const e=this.fifoQueue.indexOf(Math.min(...this.fifoQueue));this.memory[e]=t,this.fifoQueue[e]=this.currentInstructionIndex}}else this.fifoQueue[e]=this.currentInstructionIndex;this.updateInstructionTable(t,n)},accessMemoryLRU(t,e){let n=!1;if(-1===e){n=!0,this.pageFaults++;const e=this.memory.indexOf(null);if(-1!==e)this.memory[e]=t,this.lruQueue[e]=this.currentInstructionIndex;else{const e=this.lruQueue.indexOf(Math.min(...this.lruQueue));this.memory[e]=t,this.lruQueue[e]=this.currentInstructionIndex}}else this.lruQueue[e]=this.currentInstructionIndex;this.updateInstructionTable(t,n)},resetSimulation(){this.totalInstructions=320,this.memory=[],this.memoryHistory=[],this.pageFaults=0,this.pageFaultRate=0,this.instructionSequence=[],this.fifoQueue=[],this.lruQueue=[],this.currentInstruction=null,this.currentInstructionIndex=0,this.selectedAlgorithm=null,this.autoExecutionInterval&&(clearInterval(this.autoExecutionInterval),this.autoExecutionInterval=null),this.instructionsComplete=!1,this.customInstructions="",this.instructionTable=[],this.currentPage=1},updateInstructionTable(t,e){this.instructionTable.push({index:this.currentInstructionIndex,instruction:this.currentInstruction,pageNumber:t,pageFault:e?"是":"否",pageFaultRate:this.pageFaultRate.toFixed(3)})},updatePageFaultRate(){this.pageFaultRate=this.pageFaults/(this.currentInstructionIndex+1)*100},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}},V=n(6262);const D=(0,V.A)(J,[["render",K],["__scopeId","data-v-aeb05f40"]]);var G=D,W={name:"App",components:{MemoryManagement:G}};const Y=(0,V.A)(W,[["render",o]]);var Z=Y;(0,i.Ef)(Z).mount("#app")}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var u=e[i]={exports:{}};return t[i].call(u.exports,u,u.exports,n),u.exports}n.m=t,function(){var t=[];n.O=function(e,i,s,u){if(!i){var o=1/0;for(a=0;a<t.length;a++){i=t[a][0],s=t[a][1],u=t[a][2];for(var r=!0,l=0;l<i.length;l++)(!1&u||o>=u)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(r=!1,u<o&&(o=u));if(r){t.splice(a--,1);var c=s();void 0!==c&&(e=c)}}return e}u=u||0;for(var a=t.length;a>0&&t[a-1][2]>u;a--)t[a]=t[a-1];t[a]=[i,s,u]}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,u,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var a=l(n)}for(e&&e(i);c<o.length;c++)u=o[c],n.o(t,u)&&t[u]&&t[u][0](),t[u]=0;return n.O(a)},i=self["webpackChunkmemory_management"]=self["webpackChunkmemory_management"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(578)}));i=n.O(i)})();
//# sourceMappingURL=app.54877df9.js.map